import{r as d,m as K,j as e}from"./app-BCMe5ZWi.js";import{c as P}from"./utils-CXz1v5ar.js";import{s as R,j as c,k as w,l as u,t as j,u as F,v as T,w as b,x as I}from"./index-6T1-a0lL.js";import"./clsx-B-dksMZM.js";const Q=({nouid:x,siswa:a})=>{var N,f,y,k,C,S,D;const[o,g]=d.useState(!1),[p,m]=d.useState([]),[L,B]=d.useState([]),[G,O]=d.useState([]),[U,W]=d.useState([]),[H,V]=d.useState({province:0,regency:0,district:0,village:0}),{data:s,setData:r,processing:A,errors:t}=K({nis:a.nis??"",namlen:a.namlen,kel:a.kel??"",tel:a.tel??"",ttl:a.ttl??"",email:a.email??"",alamat:{ids:0,ala:"",rt:"",rw:"",cam:"",lur:"",kodpos:"",dusun:"",buj:"",lin:"",temtin:"",trans:"",aga:"",ktp:"",goldar:"",warneg:"",neg:"",bah:"",anakke:"",butuh:"",sakit:""},wali:{ayah:((N=a.wali)==null?void 0:N.ayah)??"",ibu:((f=a.wali)==null?void 0:f.ibu)??"",tel:((y=a.wali)==null?void 0:y.tel)??""},excul:a.excul??[],prestasi:a.prestasi??[]});d.useCallback(async()=>{try{const h=await fetch("/api/provinces.json"),E=await h.json();if(!h.ok)throw new Error(E.message);m(E||{})}catch(l){console.error("Gagal ambil tagihan:",l)}finally{}},[]);const v=l=>{l.preventDefault(),console.log(s)};return e.jsxs("div",{className:"w-full space-y-6 p-4",children:[e.jsxs("div",{className:"flex flex-col justify-between space-y-3 md:flex-row md:items-center md:space-y-0",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Data Siswa Lengkap"}),o?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex items-center gap-2 rounded-lg bg-gray-500 px-4 py-2 text-white transition-colors hover:bg-gray-600",children:"Batal"}),e.jsx("button",{onClick:v,disabled:A,className:"flex items-center gap-2 rounded-lg bg-green-500 px-4 py-2 text-white transition-colors hover:bg-green-600 disabled:opacity-50",children:"Simpan Perubahan"})]}):e.jsxs("button",{onClick:()=>g(!0),className:"flex w-32 items-center justify-center gap-2 rounded-lg bg-blue-500 px-4 py-2 text-white transition-colors hover:bg-blue-600",children:[e.jsx(R,{className:"text-lg"}),"Edit Data"]})]}),o?e.jsx("form",{onSubmit:v,className:"w-full",children:e.jsxs("div",{className:"grid w-full grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-blue-600",children:[e.jsx(c,{})," Identitas Diri"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{icon:e.jsx(w,{}),label:"NIS",value:s.nis,onChange:l=>r("nis",l.target.value),error:t.nis,disabled:!0}),e.jsx(i,{icon:e.jsx(c,{}),label:"Nama",value:s.namlen,onChange:l=>r("namlen",l.target.value),error:t.namlen,disabled:!0}),e.jsx(i,{icon:e.jsx(u,{}),label:"Kelas",value:s.kel,onChange:l=>r("kel",l.target.value),error:t.kel,disabled:!0}),e.jsx(i,{icon:e.jsx(j,{}),label:"Telepon",value:s.tel,onChange:l=>r("tel",l.target.value),error:t.tel}),e.jsx(i,{icon:e.jsx(F,{}),label:"TTL",value:s.ttl,onChange:l=>r("ttl",l.target.value),error:t.ttl}),e.jsx(i,{icon:e.jsx(T,{}),label:"Email",value:s.email,onChange:l=>r("email",l.target.value),error:t.email})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-green-600",children:[e.jsx(b,{})," Catatan Kesehatan"]}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 p-2",value:s.ala,onChange:l=>r("ala",l.target.value),rows:4}),t.ala&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.ala})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-green-600",children:[e.jsx(b,{})," Alamat"]}),e.jsx("textarea",{className:"w-full rounded border border-gray-300 p-2",value:s.ala,onChange:l=>r("ala",l.target.value),rows:4}),t.ala&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.ala})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-amber-600",children:[e.jsx(I,{})," Orang Tua"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{icon:e.jsx(c,{}),label:"Ayah",value:s.wali.ayah,onChange:l=>r("wali",{...s.wali,ayah:l.target.value}),error:t.wali&&typeof t.wali=="object"?t.wali.ayah??void 0:void 0}),e.jsx(i,{icon:e.jsx(c,{}),label:"Ibu",value:s.wali.ibu,onChange:l=>r("wali",{...s.wali,ibu:l.target.value}),error:t.wali&&typeof t.wali=="object"?t.wali.ibu??void 0:void 0}),e.jsx(i,{icon:e.jsx(j,{}),label:"Kontak Darurat",value:s.wali.tel,onChange:l=>r("wali",{...s.wali,tel:l.target.value}),error:t.wali&&typeof t.wali=="object"?t.wali.tel??void 0:void 0})]})]})})]})}):e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-blue-600",children:[e.jsx(c,{})," Identitas Diri"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{icon:e.jsx(w,{}),label:"NIS",value:(a==null?void 0:a.nis)??""}),e.jsx(n,{icon:e.jsx(c,{}),label:"Nama",value:a.namlen}),e.jsx(n,{icon:e.jsx(u,{}),label:"Kelas",value:(a==null?void 0:a.kel)??""}),e.jsx(n,{icon:e.jsx(j,{}),label:"Telepon",value:(a==null?void 0:a.tel)??""}),e.jsx(n,{icon:e.jsx(F,{}),label:"TTL",value:(a==null?void 0:a.ttl)??""}),e.jsx(n,{icon:e.jsx(T,{}),label:"Email",value:(a==null?void 0:a.email)??""})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-green-600",children:[e.jsx(b,{})," Alamat"]}),e.jsx("p",{className:"text-gray-700",children:a.ala})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-amber-600",children:[e.jsx(I,{})," Orang Tua"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{icon:e.jsx(c,{}),label:"Ayah",value:((k=a==null?void 0:a.wali)==null?void 0:k.ayah)??""}),e.jsx(n,{icon:e.jsx(c,{}),label:"Ibu",value:((C=a==null?void 0:a.wali)==null?void 0:C.ibu)??""}),e.jsx(n,{icon:e.jsx(j,{}),label:"Kontak Darurat",value:((S=a==null?void 0:a.wali)==null?void 0:S.tel)??""})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-4 shadow-sm",children:[e.jsxs("h4",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-purple-600",children:[e.jsx(u,{})," Aktivitas"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Prestasi:"}),e.jsx("ul",{className:"mt-1 list-disc space-y-1 pl-5",children:(D=a==null?void 0:a.prestasi)==null?void 0:D.map((l,h)=>e.jsx("li",{className:"text-gray-700",children:l},h))})]})})]})]})]})})]})},n=({icon:x,label:a,value:o})=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"mt-1 text-gray-500",children:x}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700",children:a}),e.jsx("p",{className:"text-gray-900",children:o})]})]}),i=({disabled:x=!1,icon:a,label:o,value:g,onChange:p,error:m})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"mb-1 ml-8 block text-sm font-bold text-gray-700",children:o}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xl text-gray-500",children:a}),e.jsx("input",{disabled:x,type:"text",value:g,onChange:p,className:P(`w-full rounded border ${m?"border-red-500":"border-gray-300"} p-2 text-sm`,x&&"bg-gray-300")})]}),m&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:m})]});export{Q as default};
