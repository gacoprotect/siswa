import{j as r,r as v,K as Z,S as ne}from"./app-CMGsiV6x.js";import{e as G,f as L,g as ee,h as V,i as ie,j as oe,k as le,l as ce,G as ue,m as de,n as pe,o as fe,p as me,q as he,r as xe,s as ge,t as ye,u as be}from"./index-DEn7vKVC.js";import{y as _,A as je}from"./AppLayout-BMIjnP9Q.js";import{f as ve}from"./utils-CXz1v5ar.js";import we from"./Topup-DAZMUlDA.js";import Ne from"./Tagihan-CCZC5izR.js";import ke from"./Pin-VEpma2B7.js";import Oe from"./SetupPin-DPXe-oTe.js";import Se from"./TagihanContent-Brs4vqeU.js";import"./clsx-B-dksMZM.js";import"./x-D-mmwb_A.js";import"./copy-BIjupPQI.js";import"./Modal-yZ4XND_7.js";const Pe=()=>{const a={nis:"20230001",name:"WAHYU WIJAYA",kelas:"XII IPA 2",alamat:"Jl. Merdeka No. 123, Jakarta",ttl:"Jakarta, 15 Mei 2006",email:"ahmad.fauzi@sekolah.sch.id",orangTua:{ayah:"Budi Santoso (081234567891)",ibu:"Siti Aminah (081234567892)"},foto:"/assets/profile.png",ekstrakurikuler:["Futsal","Robotika"],prestasi:["Juara 1 Olimpiade Matematika Tingkat Kota 2022"]};return r.jsxs("div",{className:"p-4 space-y-6",children:[r.jsxs("div",{className:"md:flex md:justify-between items-center space-y-3 mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Data Siswa Lengkap"}),r.jsxs("button",{className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx(G,{className:"text-lg"}),"Export Data"]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"rounded-lg overflow-hidden w-48 h-64 border-2 border-gray-200 shadow-md",children:r.jsx("img",{className:"w-full h-full object-cover",src:a.foto,alt:"Student profile"})})}),r.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsxs("h4",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-blue-600",children:[r.jsx(L,{})," Identitas Diri"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(C,{icon:r.jsx(ee,{}),label:"NIS",value:a.nis}),r.jsx(C,{icon:r.jsx(L,{}),label:"Nama",value:a.name}),r.jsx(C,{icon:r.jsx(V,{}),label:"Kelas",value:a.kelas}),r.jsx(C,{icon:r.jsx(ie,{}),label:"TTL",value:a.ttl}),r.jsx(C,{icon:r.jsx(oe,{}),label:"Email",value:a.email})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsxs("h4",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-green-600",children:[r.jsx(le,{})," Alamat"]}),r.jsx("p",{className:"text-gray-700",children:a.alamat})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsxs("h4",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-amber-600",children:[r.jsx(G,{})," Orang Tua"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(C,{icon:r.jsx(L,{}),label:"Ayah",value:a.orangTua.ayah}),r.jsx(C,{icon:r.jsx(L,{}),label:"Ibu",value:a.orangTua.ibu}),r.jsx(C,{icon:r.jsx(ce,{}),label:"Kontak Darurat",value:"081234567893"})]})]}),r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsxs("h4",{className:"font-semibold text-lg mb-3 flex items-center gap-2 text-purple-600",children:[r.jsx(V,{})," Aktivitas"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700",children:"Ekstrakurikuler:"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:a.ekstrakurikuler.map((t,e)=>r.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:t},e))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700",children:"Prestasi:"}),r.jsx("ul",{className:"list-disc pl-5 mt-1 space-y-1",children:a.prestasi.map((t,e)=>r.jsx("li",{className:"text-gray-700",children:t},e))})]})]})]})]})]})]})]})},C=({icon:a,label:t,value:e})=>r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-gray-500 mt-1",children:a}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-700",children:t}),r.jsx("p",{className:"text-gray-900",children:e})]})]}),$e=({errors:a,flash:t})=>{v.useEffect(()=>{Object.values(a||{}).forEach(s=>{s&&_.error(s,{toastId:`err-${s}`})})},[a]),v.useEffect(()=>{t!=null&&t.message&&(t.success===!0?_.success(t.message,{toastId:`flash-${t.message}`}):t.success===!1&&_.error(t.message,{toastId:`flash-${t.message}`}))},[t])};function Ce(a){return ue({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(a)}function k(){return k=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var s in e)({}).hasOwnProperty.call(e,s)&&(a[s]=e[s])}return a},k.apply(null,arguments)}var Ae=String.prototype.replace,Ee=/%20/g,Ie="RFC3986",D={default:Ie,formatters:{RFC1738:function(a){return Ae.call(a,Ee,"+")},RFC3986:function(a){return String(a)}},RFC1738:"RFC1738"},Q=Object.prototype.hasOwnProperty,I=Array.isArray,S=function(){for(var a=[],t=0;t<256;++t)a.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return a}(),J=function(a,t){for(var e=t&&t.plainObjects?Object.create(null):{},s=0;s<a.length;++s)a[s]!==void 0&&(e[s]=a[s]);return e},A={arrayToObject:J,assign:function(a,t){return Object.keys(t).reduce(function(e,s){return e[s]=t[s],e},a)},combine:function(a,t){return[].concat(a,t)},compact:function(a){for(var t=[{obj:{o:a},prop:"o"}],e=[],s=0;s<t.length;++s)for(var o=t[s],i=o.obj[o.prop],n=Object.keys(i),u=0;u<n.length;++u){var c=n[u],m=i[c];typeof m=="object"&&m!==null&&e.indexOf(m)===-1&&(t.push({obj:i,prop:c}),e.push(m))}return function(h){for(;h.length>1;){var d=h.pop(),p=d.obj[d.prop];if(I(p)){for(var l=[],x=0;x<p.length;++x)p[x]!==void 0&&l.push(p[x]);d.obj[d.prop]=l}}}(t),a},decode:function(a,t,e){var s=a.replace(/\+/g," ");if(e==="iso-8859-1")return s.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(s)}catch{return s}},encode:function(a,t,e,s,o){if(a.length===0)return a;var i=a;if(typeof a=="symbol"?i=Symbol.prototype.toString.call(a):typeof a!="string"&&(i=String(a)),e==="iso-8859-1")return escape(i).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});for(var n="",u=0;u<i.length;++u){var c=i.charCodeAt(u);c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===D.RFC1738&&(c===40||c===41)?n+=i.charAt(u):c<128?n+=S[c]:c<2048?n+=S[192|c>>6]+S[128|63&c]:c<55296||c>=57344?n+=S[224|c>>12]+S[128|c>>6&63]+S[128|63&c]:(c=65536+((1023&c)<<10|1023&i.charCodeAt(u+=1)),n+=S[240|c>>18]+S[128|c>>12&63]+S[128|c>>6&63]+S[128|63&c])}return n},isBuffer:function(a){return!(!a||typeof a!="object"||!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a)))},isRegExp:function(a){return Object.prototype.toString.call(a)==="[object RegExp]"},maybeMap:function(a,t){if(I(a)){for(var e=[],s=0;s<a.length;s+=1)e.push(t(a[s]));return e}return t(a)},merge:function a(t,e,s){if(!e)return t;if(typeof e!="object"){if(I(t))t.push(e);else{if(!t||typeof t!="object")return[t,e];(s&&(s.plainObjects||s.allowPrototypes)||!Q.call(Object.prototype,e))&&(t[e]=!0)}return t}if(!t||typeof t!="object")return[t].concat(e);var o=t;return I(t)&&!I(e)&&(o=J(t,s)),I(t)&&I(e)?(e.forEach(function(i,n){if(Q.call(t,n)){var u=t[n];u&&typeof u=="object"&&i&&typeof i=="object"?t[n]=a(u,i,s):t.push(i)}else t[n]=i}),t):Object.keys(e).reduce(function(i,n){var u=e[n];return i[n]=Q.call(i,n)?a(i[n],u,s):u,i},o)}},Fe=Object.prototype.hasOwnProperty,W={brackets:function(a){return a+"[]"},comma:"comma",indices:function(a,t){return a+"["+t+"]"},repeat:function(a){return a}},F=Array.isArray,Te=String.prototype.split,Re=Array.prototype.push,te=function(a,t){Re.apply(a,F(t)?t:[t])},De=Date.prototype.toISOString,Y=D.default,w={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:A.encode,encodeValuesOnly:!1,format:Y,formatter:D.formatters[Y],indices:!1,serializeDate:function(a){return De.call(a)},skipNulls:!1,strictNullHandling:!1},Me=function a(t,e,s,o,i,n,u,c,m,h,d,p,l,x){var g,f=t;if(typeof u=="function"?f=u(e,f):f instanceof Date?f=h(f):s==="comma"&&F(f)&&(f=A.maybeMap(f,function(H){return H instanceof Date?h(H):H})),f===null){if(o)return n&&!l?n(e,w.encoder,x,"key",d):e;f=""}if(typeof(g=f)=="string"||typeof g=="number"||typeof g=="boolean"||typeof g=="symbol"||typeof g=="bigint"||A.isBuffer(f)){if(n){var y=l?e:n(e,w.encoder,x,"key",d);if(s==="comma"&&l){for(var j=Te.call(String(f),","),N="",O=0;O<j.length;++O)N+=(O===0?"":",")+p(n(j[O],w.encoder,x,"value",d));return[p(y)+"="+N]}return[p(y)+"="+p(n(f,w.encoder,x,"value",d))]}return[p(e)+"="+p(String(f))]}var P,T=[];if(f===void 0)return T;if(s==="comma"&&F(f))P=[{value:f.length>0?f.join(",")||null:void 0}];else if(F(u))P=u;else{var E=Object.keys(f);P=c?E.sort(c):E}for(var M=0;M<P.length;++M){var $=P[M],B=typeof $=="object"&&$.value!==void 0?$.value:f[$];if(!i||B!==null){var q=F(f)?typeof s=="function"?s(e,$):e:e+(m?"."+$:"["+$+"]");te(T,a(B,q,s,o,i,n,u,c,m,h,d,p,l,x))}}return T},z=Object.prototype.hasOwnProperty,He=Array.isArray,U={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:A.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Le=function(a){return a.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},re=function(a,t){return a&&typeof a=="string"&&t.comma&&a.indexOf(",")>-1?a.split(","):a},Be=function(a,t,e,s){if(a){var o=e.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a,i=/(\[[^[\]]*])/g,n=e.depth>0&&/(\[[^[\]]*])/.exec(o),u=n?o.slice(0,n.index):o,c=[];if(u){if(!e.plainObjects&&z.call(Object.prototype,u)&&!e.allowPrototypes)return;c.push(u)}for(var m=0;e.depth>0&&(n=i.exec(o))!==null&&m<e.depth;){if(m+=1,!e.plainObjects&&z.call(Object.prototype,n[1].slice(1,-1))&&!e.allowPrototypes)return;c.push(n[1])}return n&&c.push("["+o.slice(n.index)+"]"),function(h,d,p,l){for(var x=l?d:re(d,p),g=h.length-1;g>=0;--g){var f,y=h[g];if(y==="[]"&&p.parseArrays)f=[].concat(x);else{f=p.plainObjects?Object.create(null):{};var j=y.charAt(0)==="["&&y.charAt(y.length-1)==="]"?y.slice(1,-1):y,N=parseInt(j,10);p.parseArrays||j!==""?!isNaN(N)&&y!==j&&String(N)===j&&N>=0&&p.parseArrays&&N<=p.arrayLimit?(f=[])[N]=x:j!=="__proto__"&&(f[j]=x):f={0:x}}x=f}return x}(c,t,e,s)}},Ue=function(a,t){var e=function(m){return U}();if(a===""||a==null)return e.plainObjects?Object.create(null):{};for(var s=typeof a=="string"?function(m,h){var d,p={},l=(h.ignoreQueryPrefix?m.replace(/^\?/,""):m).split(h.delimiter,h.parameterLimit===1/0?void 0:h.parameterLimit),x=-1,g=h.charset;if(h.charsetSentinel)for(d=0;d<l.length;++d)l[d].indexOf("utf8=")===0&&(l[d]==="utf8=%E2%9C%93"?g="utf-8":l[d]==="utf8=%26%2310003%3B"&&(g="iso-8859-1"),x=d,d=l.length);for(d=0;d<l.length;++d)if(d!==x){var f,y,j=l[d],N=j.indexOf("]="),O=N===-1?j.indexOf("="):N+1;O===-1?(f=h.decoder(j,U.decoder,g,"key"),y=h.strictNullHandling?null:""):(f=h.decoder(j.slice(0,O),U.decoder,g,"key"),y=A.maybeMap(re(j.slice(O+1),h),function(P){return h.decoder(P,U.decoder,g,"value")})),y&&h.interpretNumericEntities&&g==="iso-8859-1"&&(y=Le(y)),j.indexOf("[]=")>-1&&(y=He(y)?[y]:y),p[f]=z.call(p,f)?A.combine(p[f],y):y}return p}(a,e):a,o=e.plainObjects?Object.create(null):{},i=Object.keys(s),n=0;n<i.length;++n){var u=i[n],c=Be(u,s[u],e,typeof a=="string");o=A.merge(o,c,e)}return A.compact(o)};class K{constructor(t,e,s){var o,i;this.name=t,this.definition=e,this.bindings=(o=e.bindings)!=null?o:{},this.wheres=(i=e.wheres)!=null?i:{},this.config=s}get template(){const t=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return t===""?"/":t}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var t,e;return(t=(e=this.template.match(/{[^}?]+\??}/g))==null?void 0:e.map(s=>({name:s.replace(/{|\??}/g,""),required:!/\?}$/.test(s)})))!=null?t:[]}matchesUrl(t){var e;if(!this.definition.methods.includes("GET"))return!1;const s=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(u,c,m,h)=>{var d;const p=`(?<${m}>${((d=this.wheres[m])==null?void 0:d.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return h?`(${c}${p})?`:`${c}${p}`}).replace(/^\w+:\/\//,""),[o,i]=t.replace(/^\w+:\/\//,"").split("?"),n=(e=new RegExp(`^${s}/?$`).exec(o))!=null?e:new RegExp(`^${s}/?$`).exec(decodeURI(o));if(n){for(const u in n.groups)n.groups[u]=typeof n.groups[u]=="string"?decodeURIComponent(n.groups[u]):n.groups[u];return{params:n.groups,query:Ue(i)}}return!1}compile(t){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(e,s,o)=>{var i,n;if(!o&&[null,void 0].includes(t[s]))throw new Error(`Ziggy error: '${s}' parameter is required for route '${this.name}'.`);if(this.wheres[s]&&!new RegExp(`^${o?`(${this.wheres[s]})?`:this.wheres[s]}$`).test((n=t[s])!=null?n:""))throw new Error(`Ziggy error: '${s}' parameter '${t[s]}' does not match required format '${this.wheres[s]}' for route '${this.name}'.`);return encodeURI((i=t[s])!=null?i:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class qe extends String{constructor(t,e,s=!0,o){if(super(),this.t=o??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),this.t=k({},this.t,{absolute:s}),t){if(!this.t.routes[t])throw new Error(`Ziggy error: route '${t}' is not in the route list.`);this.i=new K(t,this.t.routes[t],this.t),this.u=this.l(e)}}toString(){const t=Object.keys(this.u).filter(e=>!this.i.parameterSegments.some(({name:s})=>s===e)).filter(e=>e!=="_query").reduce((e,s)=>k({},e,{[s]:this.u[s]}),{});return this.i.compile(this.u)+function(e,s){var o,i=e,n=function(l){if(!l)return w;if(l.encoder!=null&&typeof l.encoder!="function")throw new TypeError("Encoder has to be a function.");var x=l.charset||w.charset;if(l.charset!==void 0&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var g=D.default;if(l.format!==void 0){if(!Fe.call(D.formatters,l.format))throw new TypeError("Unknown format option provided.");g=l.format}var f=D.formatters[g],y=w.filter;return(typeof l.filter=="function"||F(l.filter))&&(y=l.filter),{addQueryPrefix:typeof l.addQueryPrefix=="boolean"?l.addQueryPrefix:w.addQueryPrefix,allowDots:l.allowDots===void 0?w.allowDots:!!l.allowDots,charset:x,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:w.charsetSentinel,delimiter:l.delimiter===void 0?w.delimiter:l.delimiter,encode:typeof l.encode=="boolean"?l.encode:w.encode,encoder:typeof l.encoder=="function"?l.encoder:w.encoder,encodeValuesOnly:typeof l.encodeValuesOnly=="boolean"?l.encodeValuesOnly:w.encodeValuesOnly,filter:y,format:g,formatter:f,serializeDate:typeof l.serializeDate=="function"?l.serializeDate:w.serializeDate,skipNulls:typeof l.skipNulls=="boolean"?l.skipNulls:w.skipNulls,sort:typeof l.sort=="function"?l.sort:null,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:w.strictNullHandling}}(s);typeof n.filter=="function"?i=(0,n.filter)("",i):F(n.filter)&&(o=n.filter);var u=[];if(typeof i!="object"||i===null)return"";var c=W[s&&s.arrayFormat in W?s.arrayFormat:s&&"indices"in s?s.indices?"indices":"repeat":"indices"];o||(o=Object.keys(i)),n.sort&&o.sort(n.sort);for(var m=0;m<o.length;++m){var h=o[m];n.skipNulls&&i[h]===null||te(u,Me(i[h],h,c,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset))}var d=u.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(p+=n.charset==="iso-8859-1"?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),d.length>0?p+d:""}(k({},t,this.u._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(e,s)=>typeof e=="boolean"?Number(e):s(e)})}p(t){t?this.t.absolute&&t.startsWith("/")&&(t=this.h().host+t):t=this.v();let e={};const[s,o]=Object.entries(this.t.routes).find(([i,n])=>e=new K(i,n,this.t).matchesUrl(t))||[void 0,void 0];return k({name:s},e,{route:o})}v(){const{host:t,pathname:e,search:s}=this.h();return(this.t.absolute?t+e:e.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+s}current(t,e){const{name:s,params:o,query:i,route:n}=this.p();if(!t)return s;const u=new RegExp(`^${t.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(s);if([null,void 0].includes(e)||!u)return u;const c=new K(s,n,this.t);e=this.l(e,c);const m=k({},o,i);if(Object.values(e).every(d=>!d)&&!Object.values(m).some(d=>d!==void 0))return!0;const h=(d,p)=>Object.entries(d).every(([l,x])=>Array.isArray(x)&&Array.isArray(p[l])?x.every(g=>p[l].includes(g)):typeof x=="object"&&typeof p[l]=="object"&&x!==null&&p[l]!==null?h(x,p[l]):p[l]==x);return h(e,m)}h(){var t,e,s,o,i,n;const{host:u="",pathname:c="",search:m=""}=typeof window<"u"?window.location:{};return{host:(t=(e=this.t.location)==null?void 0:e.host)!=null?t:u,pathname:(s=(o=this.t.location)==null?void 0:o.pathname)!=null?s:c,search:(i=(n=this.t.location)==null?void 0:n.search)!=null?i:m}}get params(){const{params:t,query:e}=this.p();return k({},t,e)}get routeParams(){return this.p().params}get queryParams(){return this.p().query}has(t){return this.t.routes.hasOwnProperty(t)}l(t={},e=this.i){t!=null||(t={}),t=["string","number"].includes(typeof t)?[t]:t;const s=e.parameterSegments.filter(({name:o})=>!this.t.defaults[o]);return Array.isArray(t)?t=t.reduce((o,i,n)=>k({},o,s[n]?{[s[n].name]:i}:typeof i=="object"?i:{[i]:""}),{}):s.length!==1||t[s[0].name]||!t.hasOwnProperty(Object.values(e.bindings)[0])&&!t.hasOwnProperty("id")||(t={[s[0].name]:t}),k({},this.m(e),this.j(t,e))}m(t){return t.parameterSegments.filter(({name:e})=>this.t.defaults[e]).reduce((e,{name:s},o)=>k({},e,{[s]:this.t.defaults[s]}),{})}j(t,{bindings:e,parameterSegments:s}){return Object.entries(t).reduce((o,[i,n])=>{if(!n||typeof n!="object"||Array.isArray(n)||!s.some(({name:u})=>u===i))return k({},o,{[i]:n});if(!n.hasOwnProperty(e[i])){if(!n.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${i}' parameter is missing route model binding key '${e[i]}'.`);e[i]="id"}return k({},o,{[i]:n[e[i]]})},{})}valueOf(){return this.toString()}}function X(a,t,e,s){const o=new qe(a,t,e,s);return a?o.toString():o}function rt(){const{auth:a,data:t}=Z().props,[e,s]=v.useState(t),[o,i]=v.useState(null),[n,u]=v.useState("index"),[c,m]=v.useState(!1),[h,d]=v.useState(!1),[p,l]=v.useState(t.siswa.has_pin),[x,g]=v.useState(null),[f,y]=v.useState({nouid:null,spr:null,jen1:[],tagihan:0});$e(Z().props),v.useEffect(()=>{s(t)},[t]);const j=v.useCallback(async b=>{b==="riwayat"?(d(!0),g("pin")):u(b)},[]),N=v.useMemo(()=>[{title:"Tagihan",icon:r.jsx(de,{className:"h-6 w-6 text-green-600"}),color:"border-green-700 bg-green-50 hover:bg-green-100",content:r.jsx(Se,{nouid:e.nouid,setTagihanParam:b=>{y(b),j("tagihan")}})},{title:"Data Siswa",icon:r.jsx(pe,{className:"h-6 w-6 text-amber-600"}),color:"border-amber-700 bg-amber-50 hover:bg-amber-100",content:r.jsx(Pe,{})},{title:"Ekstrakurikuler",icon:r.jsx(fe,{className:"h-6 w-6 text-rose-600"}),color:"border-rose-700 bg-rose-50 hover:bg-rose-100"}],[e,j]),O=v.useCallback(async()=>{try{m(!0);const b=await fetch(X("api.siswa",e.nouid)+`?nouid=${encodeURIComponent(e.nouid)}`);b.ok||console.error("Terjadi kesalahan saat mengambil data siswa");const R=await b.json();R.success!==!0&&console.error(R.message||"Terjadi kesalahan pada server"),s(R.data)}catch(b){m(!1),console.error(b instanceof Error?b.message:"Terjadi kesalahan jaringan")}finally{m(!1)}},[e]),P=v.useCallback(async()=>{c||g("pin")},[c]),T=v.useCallback(async()=>{c||g("setupPin")},[c]),E=v.useCallback(async(b=!1)=>{g(null),b||(d(!1),u("index"))},[]),M=v.useCallback(async()=>{confirm("Anda yakin ingin keluar?")&&ne.post(X("siswa.logout",e.nouid),{},{onStart:()=>m(!0),onSuccess:()=>m(!1),onError:()=>m(!1)})},[e.nouid]),$=v.useMemo(()=>ve((e==null?void 0:e.siswa.balance)||0),[e==null?void 0:e.siswa.balance]),B=v.useMemo(()=>{if(o===null)return null;const b=N[o];return b!=null&&b.content?r.jsxs("div",{className:"relative rounded-xl border border-t-4 border-gray-800 bg-blue-50 p-2 pt-8 shadow-lg",children:[r.jsx("button",{onClick:()=>i(null),className:"absolute top-3 right-3 text-gray-500 transition hover:text-red-500","aria-label":"Tutup",children:r.jsx(me,{className:"h-5 w-5"})}),b.content]}):r.jsx("div",{children:"Konten tidak tersedia"})},[o,N]),q=()=>r.jsxs("div",{className:"flex w-full flex-col items-start rounded-t-lg bg-white p-4 px-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(L,{className:"flex-shrink-0 text-xl text-primary"}),r.jsx("h2",{className:"truncate text-3xl font-semibold text-primary",children:(e==null?void 0:e.siswa.namlen)||"******"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ee,{className:"flex-shrink-0 text-lg text-primary"}),r.jsxs("p",{className:"text-primary md:text-lg",children:["NIS: ",(e==null?void 0:e.siswa.nis)||"*****"]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(V,{className:"flex-shrink-0 text-lg text-primary"}),r.jsxs("p",{className:"text-primary md:text-lg",children:["Kelas: ",(e==null?void 0:e.siswa.kel)||"******"]})]})]}),H=()=>r.jsxs("div",{className:"grid w-full grid-cols-2 items-center gap-4 border-b-2 p-2 px-6",children:[a.user?r.jsxs("button",{onClick:M,className:"flex items-center justify-center space-x-2 rounded-xl border border-indigo-100 bg-red-800 px-4 py-3 text-white shadow-sm transition-colors hover:bg-red-700",children:[r.jsx(Ce,{className:"text-lg"}),r.jsx("span",{children:"Keluar"})]}):r.jsxs("button",{onClick:P,className:"flex items-center justify-center space-x-2 rounded-xl border border-indigo-100 bg-white px-4 py-3 text-indigo-600 shadow-sm transition-colors hover:bg-indigo-50",children:[r.jsx(he,{className:"text-lg"}),r.jsx("span",{children:"Masukan PIN"})]}),r.jsxs("button",{onClick:T,className:"flex items-center justify-center space-x-2 rounded-xl border border-indigo-100 bg-white px-4 py-3 text-indigo-600 shadow-sm transition-colors hover:bg-indigo-50",children:[r.jsx(xe,{className:"text-lg"}),r.jsx("span",{children:p?"Ubah PIN":"Buat Pin"})]})]}),se=()=>r.jsx("div",{className:"mb-4 w-full shadow-[0px_10px_10px_-4px_rgba(0,0,0,0.1)] shadow-black",children:r.jsxs("div",{className:"flex w-full flex-row items-center justify-between gap-4 p-4 sm:px-6",children:[r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx("h1",{className:"text-lg font-semibold text-primary-foreground",children:"Saldo Tabungan"}),r.jsxs("div",{className:"flex items-center gap-2 text-primary-foreground",children:[r.jsx(ge,{className:"text-xl"}),r.jsx("span",{className:"text-xl font-bold",children:$})]})]}),r.jsxs("div",{className:"flex flex-col items-end justify-end space-y-4",children:[r.jsxs("button",{onClick:()=>j("topup"),className:"flex items-center gap-2 rounded-md bg-primary-foreground px-4 py-2 text-primary hover:bg-accent",children:[r.jsx(ye,{}),r.jsx("span",{children:"Topup"})]}),r.jsxs("button",{onClick:()=>j("riwayat"),className:"flex items-center gap-2 rounded-md bg-primary-foreground px-4 py-2 text-primary hover:bg-accent",children:[r.jsx(be,{}),r.jsx("span",{children:"Riwayat"})]})]})]})}),ae=()=>r.jsx("div",{className:"mb-6 grid grid-cols-3 gap-4 px-4 sm:grid-cols-5",children:N.map((b,R)=>r.jsxs("button",{className:`flex flex-col items-center justify-center rounded-xl border border-t-5 p-2 transition duration-200 ${b.color}`,onClick:()=>i(R),children:[b.icon,r.jsx("span",{className:"mt-2 text-center text-sm font-semibold text-gray-800",children:b.title})]},R))});return r.jsxs(r.Fragment,{children:[n==="index"?r.jsxs(je,{title:(e==null?void 0:e.siswa.namlen)||"Login",children:[r.jsx(q,{}),r.jsx(H,{}),a.user&&r.jsxs(r.Fragment,{children:[r.jsx(se,{}),r.jsx(ae,{}),B]})]}):n==="topup"?r.jsx(we,{siswa:e.siswa,nouid:e.nouid,onClose:()=>{u("index"),E(),O()}}):n==="tagihan"?r.jsx(Ne,{tagihanParam:f,onClose:()=>{u("index"),E(),O()}}):null,r.jsx(ke,{open:x==="pin",hasPin:p,handle:h?"riwayat":n,setPage:u,setOpenSetupPin:T,onClose:b=>{E(b),b||d(!1)}}),r.jsx(Oe,{open:x==="setupPin",hasPin:p,setHasPined:()=>l(!0),onClose:()=>{E(),O()}})]})}export{rt as default};
