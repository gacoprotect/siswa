import{j as e,K as b,m as w}from"./app-0TZxd7-0.js";import{B as x}from"./badge-DvI8zj2W.js";import{b as u,a as T}from"./utils-hnvxDYey.js";import{B as P}from"./button-DGrauBBw.js";import{P as S}from"./payment-method-pxkY7Sj_.js";const B=({title:s,badge:n=!1,badgeRender:t,dataLength:c=0,subtext:l})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"mb-4 text-lg font-semibold",children:s}),n&&(t||e.jsxs(x,{children:[c," ",l]}))]}),R=({children:s})=>e.jsx("div",{className:"border-t pt-4",children:s}),k=(s,n)=>{const t=Object.values(s);return e.jsx("tr",{children:t.map((c,l)=>e.jsx("td",{className:"p-2 text-sm whitespace-nowrap text-gray-900",children:String(c||"")},l))},n)},C=({title:s,badgeRender:n,badge:t=!1,dataLength:c,subtext:l,th:r=[],data:m=[],renderRow:j=k,footer:h})=>e.jsx("div",{className:"overflow-hidden rounded-lg border shadow-sm",children:e.jsxs("div",{className:"bg-white p-4",children:[e.jsx(B,{title:s,dataLength:c,subtext:l,badgeRender:n,badge:t}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:r.map((o,a)=>e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider text-gray-500 uppercase",children:o},a))})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:m==null?void 0:m.map((o,a)=>j(o,a))})]})}),h&&e.jsx(R,{children:h})]})}),A=({totalTagihan:s,totalDisc:n,total:t})=>e.jsxs("div",{className:"flex flex-col justify-self-end",children:[n?e.jsxs("div",{className:"border-b-2 border-dotted border-black",children:[e.jsxs("div",{className:"flex text-sm",children:[e.jsx("div",{className:"font-medium w-25",children:"Total"}),e.jsx("div",{className:"font-medium mx-1",children:":"}),e.jsx("div",{className:"font-medium mr-2 text-red-600",children:"Rp"}),e.jsx("div",{className:"font-medium text-red-600 flex-1 text-right",children:u(t)})]}),e.jsxs("div",{className:"flex text-sm",children:[e.jsx("div",{className:"font-medium w-25",children:"Potongan"}),e.jsx("div",{className:"font-medium mx-1",children:":"}),e.jsx("div",{className:"font-medium mr-2 text-red-600",children:"Rp"}),e.jsx("div",{className:"font-medium text-red-600 flex-1 text-right",children:u(n)})]})]}):null,e.jsxs("div",{className:"flex text-sm font-semibold",children:[e.jsx("div",{className:"font-semibold w-25",children:"Total Tagihan"}),e.jsx("div",{className:"font-semibold mx-1",children:":"}),e.jsx("div",{className:"font-semibold mr-2 text-blue-600",children:"Rp"}),e.jsx("div",{className:"font-semibold text-blue-600 flex-1 text-right",children:u(s)})]})]}),_=({data:s=[]})=>{const n=(s==null?void 0:s.filter(r=>r.jen===0).length)||0,t=(s==null?void 0:s.filter(r=>r.jen===1).length)||0,c=(s==null?void 0:s.filter(r=>r.jen===2).length)||0,l=(s==null?void 0:s.filter(r=>r.jen===10).length)||0;return e.jsxs("div",{className:"space-x-2",children:[n>0&&e.jsxs(x,{children:[n," Tagihan"]}),t>0&&e.jsxs(x,{className:"bg-emerald-500",children:[t," Bantuan"]}),c>0&&e.jsxs(x,{variant:"destructive",children:[c," Denda"]}),l>0&&e.jsxs(x,{variant:"destructive",children:[l," Kurang Bayar"]})]})},F=({siswa:s,tableData:n,existingTransaction:t})=>{const{data:c,summary:l}=b().props,{post:r,processing:m,setData:j,errors:h,setError:o,clearErrors:a}=w({spr:l==null?void 0:l.spr,nouid:c.nouid,payment_method:"wallet",amount:l.total_tagihan,orderId:"",uri:null}),v=async i=>{a();try{await new Promise(d=>setTimeout(d,2e3)),i==="wallet"?r("/api/payment/wallet",{onSuccess:()=>{console.log("Wallet payment successful")}}):r("/api/payment/va",{onSuccess:()=>{console.log("VA payment initiated")}})}catch{o("payment_method","Terjadi kesalahan saat memproses pembayaran")}},N=i=>{j("payment_method",i),a()},p=(n==null?void 0:n.map(i=>({tagihan:`${i.tah} - ${i.bulan}`,jumlah:T(i.jumlah),ket:i.ket})))||[],f=(n==null?void 0:n.reduce((i,d)=>i+d.jumlah,0))||0,g=(n==null?void 0:n.filter(i=>i.jen===0).reduce((i,d)=>i+d.jumlah,0))||0,y=(n==null?void 0:n.filter(i=>i.jen===1).reduce((i,d)=>i+d.jumlah,0))||0;return e.jsxs("div",{className:"min-h-screen overflow-hidden space-y-2 ",children:[e.jsxs("div",{className:"border-b p-2 space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("h1",{className:"text-xl text-blue-500 font-bold text-center",children:"Pembayaran Tagihan"})}),e.jsxs("div",{className:"mt-4 p-2",children:[e.jsxs("div",{className:"flex text-sm",children:[e.jsx("div",{className:"font-medium w-25",children:"NIS"}),e.jsx("div",{className:"font-medium mx-2",children:":"}),e.jsx("div",{className:"font-medium flex-1 text-left",children:s.nis})]}),e.jsxs("div",{className:"flex text-sm",children:[e.jsx("div",{className:"font-medium w-25",children:"Nama"}),e.jsx("div",{className:"font-medium mx-2",children:":"}),e.jsx("div",{className:"font-medium flex-1 text-left",children:s.namlen.toUpperCase()})]}),e.jsxs("div",{className:"flex text-sm",children:[e.jsx("div",{className:"font-medium w-25",children:"No. Telepon"}),e.jsx("div",{className:"font-medium mx-2",children:":"}),e.jsx("div",{className:"font-medium flex-1 text-left",children:s.tel})]})]})]}),e.jsx(C,{title:"Rincian Tagihan",badge:!0,badgeRender:e.jsx(_,{data:n}),dataLength:n.length,subtext:"Tagihan",th:["Tagihan","Jumlah","Keterangan"],data:p,footer:e.jsx(A,{total:g,totalDisc:y,totalTagihan:f})}),e.jsx("div",{className:"p-4",children:l.isPaid?e.jsxs("div",{className:"text-center justify-center",children:[e.jsx(P,{children:"Lihat Invoice"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 p-6",children:[e.jsx("div",{className:"flex h-15 w-40 items-center justify-center border-4 border-green-700 p-4",children:e.jsx("h1",{className:"text-4xl font-bold text-green-700",children:"LUNAS"})}),e.jsx("p",{className:"text-gray-600",children:"Pembayaran berhasil diproses"})]})]}):e.jsx(S,{selectedMethod:N,siswa:s,totalAmount:f,existingTransaction:t,onSubmit:v,processing:m,errors:h})})]})};export{F as D,C as T,_ as a};
