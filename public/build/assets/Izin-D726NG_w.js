import{j as e,r as l,a as V,m as K}from"./app-DBFX6DRv.js";import{c as O,B as w}from"./button-B1awjRTs.js";import{S as L,a as q,b as Z,c as X,d as Y}from"./select-BZwJSou3.js";import{S as Q}from"./index-kBBakEI_.js";import{c as W}from"./utils-CXz1v5ar.js";import{I}from"./InputGroup-CC2imBXQ.js";import{c as m}from"./createLucideIcon-B30UdKiv.js";import{C as ee}from"./circle-alert-Bg6sd1cH.js";import{C as ae}from"./ConfirmDialog -CGvtCPXh.js";import{F as te}from"./file-text-BrCghJ3y.js";import{C as $,a as se}from"./clock-lehvUcmO.js";import{C as le}from"./circle-check-big-BmtTbO5r.js";/* empty css            */import"./clsx-B-dksMZM.js";import"./check-B6gMm2m6.js";import"./iconBase-Chwkx_b_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ne=m("CalendarDays",re);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],oe=m("CircleHelp",ie);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],de=m("HeartPulse",ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ue=m("Plus",me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],xe=m("Scissors",ge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pe=m("Send",he);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ye=m("Trash2",be);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ke=m("Upload",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ve=m("User",je),Ne=O("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function we({className:o,variant:u,asChild:p=!1,...d}){const y=p?Q:"span";return e.jsx(y,{"data-slot":"badge",className:W(Ne({variant:u}),o),...d})}const G=l.forwardRef(({name:o,label:u,preview:p,showError:d=!1,errorMessage:y="",processing:x=!1,required:b=!1,handleRemoveImage:S,handleFileChange:j,className:v=""},r)=>{const f=()=>{!x&&typeof r!="function"&&(r!=null&&r.current)&&r.current.click()},i=C=>{j(C,o)},c=()=>{S(o),typeof r!="function"&&(r!=null&&r.current)&&(r.current.value="")};return e.jsxs("div",{className:`space-y-2 ${v}`,children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[u," ",b&&"*"]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[p?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:p,alt:`Preview ${u}`,className:"max-w-full h-auto max-h-64 rounded border border-gray-200"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsx("button",{type:"button",className:"bg-red-500 text-white rounded-full p-2 hover:bg-red-600 transition-colors",onClick:c,disabled:x,children:e.jsx(ye,{className:"h-5 w-5"})})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{onClick:f,className:`flex flex-col items-center justify-center px-4 py-8 bg-white rounded-md border-2 border-dashed ${d?"border-red-300":"border-gray-300"} cursor-pointer hover:bg-gray-50 transition-colors`,"aria-invalid":d,children:[e.jsx(ke,{className:"h-12 w-12 text-gray-400"}),e.jsxs("span",{className:"mt-2 text-sm font-medium text-gray-700",children:["Upload ",u]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Format: JPG/PNG, maksimal 2MB"})]}),e.jsx("input",{ref:r,id:o,name:o,type:"file",accept:"image/jpeg, image/png, image/jpg",className:"hidden",onChange:i,disabled:x})]}),d&&e.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-2",children:[e.jsx(ee,{className:"text-red-500 w-5 h-5"}),e.jsx("span",{children:y})]})]})]})});G.displayName="InputFile";const A=[{value:"sakit",label:"Izin Sakit",icon:de,color:"text-red-500"},{value:"dispensasi",label:"Dispensasi",icon:xe,color:"text-blue-500"},{value:"pribadi",label:"Keperluan Pribadi",icon:ve,color:"text-purple-500"},{value:"lainnya",label:"Lainnya",icon:oe,color:"text-gray-500"}],Se={menunggu:{label:"Menunggu",icon:se,color:"text-yellow-500",bg:"bg-yellow-50",border:"border-yellow-100",text:"text-yellow-600"},disetujui:{label:"Disetujui",icon:le,color:"text-green-500",bg:"bg-green-50",border:"border-green-100",text:"text-green-600"},ditolak:{label:"Ditolak",icon:$,color:"text-red-500",bg:"bg-red-50",border:"border-red-100",text:"text-red-600"},dibatalkan:{label:"Dibatalkan",icon:$,color:"text-gray-500",bg:"bg-gray-50",border:"border-gray-100",text:"text-gray-600"}},Je=()=>{const{log:o,error:u}=V(),[p,d]=l.useState(!1),[y,x]=l.useState(!1),[b,S]=l.useState(null),[j,v]=l.useState([]),[r,f]=l.useState(null),[i,c]=l.useState({}),C=l.useRef(null),{data:s,setData:g,reset:M}=K({jenis:"",tglStart:"",tglEnd:"",ket:"",dok:null}),z=l.useCallback(()=>{const a={};let t=!0;return s.jenis||(a.jenis="Jenis izin harus dipilih",t=!1),s.tglStart||(a.tglStart="Tanggal mulai harus diisi",t=!1),s.tglEnd?new Date(s.tglEnd)<new Date(s.tglStart)&&(a.tglEnd="Tanggal selesai tidak boleh sebelum tanggal mulai",t=!1):(a.tglEnd="Tanggal selesai harus diisi",t=!1),s.ket?s.ket.length<10&&(a.ket="Keterangan minimal 10 karakter",t=!1):(a.ket="Keterangan harus diisi",t=!1),!s.dok&&!r&&(a.dok="Dokumen pendukung diperlukan",t=!1,setTimeout(()=>{const n=document.querySelector(".file-upload-container");n&&n.focus()},0)),c(a),t||u(a),t},[s,r,u]),P=l.useCallback(a=>{var n;const t=(n=a.target.files)==null?void 0:n[0];if(t){if(!["image/jpeg","image/png","image/jpg"].includes(t.type)){c(h=>({...h,dok:"Format file harus JPG, JPEG, atau PNG"}));return}if(t.size>2097152){c(h=>({...h,dok:"Ukuran file maksimal 2MB"}));return}c(h=>({...h,dok:void 0}));const B=new FileReader;B.onload=h=>{var F;f((F=h.target)==null?void 0:F.result),g("dok",t)},B.readAsDataURL(t)}},[g]),D=l.useCallback(a=>{f(null),g(a,null),c(t=>({...t,[a]:void 0}))},[g]),k=l.useCallback((a,t)=>{g(n=>({...n,[a]:t})),i[a]&&c(n=>({...n,[a]:void 0}))},[g,i]),_=l.useCallback(a=>{if(a.preventDefault(),!z())return;const t={id:Math.random().toString(36).substring(2,9),jenis:s.jenis,tglStart:s.tglStart,tglEnd:s.tglEnd,ket:s.ket,dok:r,status:"menunggu",dibuatPada:new Date};v(n=>[...n,t]),d(!1),M(),f(null),c({}),o("Pengajuan izin dikirim",t)},[s,r,o,M,z]),E=l.useCallback(a=>{S(a),x(!0)},[]),R=l.useCallback(()=>{b&&(v(a=>a.map(t=>t.id===b?{...t,status:"dibatalkan"}:t)),x(!1),o("Izin dibatalkan",{idIzin:b}))},[b,o]),N=l.useCallback((a,t=!1)=>{const n={day:"numeric",month:"long",year:"numeric",...t&&{hour:"2-digit",minute:"2-digit"}};return new Date(a).toLocaleDateString("id-ID",n)},[]),H=l.useMemo(()=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(te,{className:"w-10 h-10 text-gray-400 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-1",children:"Belum ada pengajuan izin"}),e.jsx("p",{className:"text-gray-400 text-center max-w-md px-4",children:'Anda belum membuat permohonan izin. Klik tombol "Ajukan Izin Baru" untuk membuat pengajuan.'})]}),[]),U=l.useCallback(a=>{const t=Se[a.status],n=A.find(T=>T.value===a.jenis);return e.jsxs("div",{className:"border rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow bg-white",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h3",{className:"font-semibold text-lg text-gray-800 capitalize",children:n==null?void 0:n.label})}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.jsx(ne,{className:"inline mr-1 w-4 h-4"}),N(a.tglStart)," - ",N(a.tglEnd)]})]}),e.jsxs(we,{variant:"outline",className:`flex items-center gap-1 px-3 py-1 ${t.bg} ${t.text} ${t.border}`,children:[e.jsx(t.icon,{className:t.color,size:16}),e.jsx("span",{className:"capitalize",children:t.label})]})]}),e.jsx("div",{className:"mt-4 space-y-2",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Keterangan"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-line",children:a.ket})]})}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["Diajukan pada: ",N(a.dibuatPada,!0)]}),a.status==="menunggu"&&e.jsx(w,{variant:"destructive",size:"sm",onClick:()=>E(a.id),className:"hover:bg-red-600 transition-colors",children:"Batalkan Pengajuan"})]})]},a.id)},[N,E]),J=l.useMemo(()=>e.jsxs("form",{onSubmit:_,className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Formulir Pengajuan Izin"})}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Jenis Izin*"}),e.jsxs(L,{value:s.jenis,onValueChange:a=>k("jenis",a),children:[e.jsx(q,{className:"w-full",children:e.jsx(Z,{placeholder:"Pilih jenis izin"})}),e.jsx(X,{children:A.map(a=>e.jsx(Y,{value:a.value,className:"hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a.icon,{className:`w-4 h-4 ${a.color}`}),e.jsx("span",{children:a.label})]})},a.value))})]}),i.jenis&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.jenis})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Mulai*"}),e.jsx(I,{type:"date",name:"tglStart",value:s.tglStart,onChange:a=>k("tglStart",a),className:"focus:ring-blue-500 focus:border-blue-500",error:i.tglStart})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Selesai*"}),e.jsx(I,{type:"date",name:"tglEnd",value:s.tglEnd,onChange:a=>k("tglEnd",a),min:s.tglStart,error:i.tglEnd,className:"focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Keterangan*"}),e.jsx(I,{name:"ket",type:"textarea",value:s.ket,onChange:a=>k("ket",a),placeholder:"Berikan penjelasan detail alasan izin...",rows:4,error:i.ket,className:"focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx(G,{ref:C,name:"dok",label:"Dokumen Pendukung",preview:r??void 0,showError:!!i.dok,errorMessage:i.dok,handleRemoveImage:()=>{D("dok"),g("dok",null)},handleFileChange:P,className:"file-upload-container"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Format: JPG, PNG (Maks. 2MB)"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100",children:[e.jsx(w,{variant:"destructive",type:"button",onClick:()=>{d(!1),c({})},children:"Batal"}),e.jsxs(w,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 transition-colors",children:[e.jsx(pe,{className:"mr-2 w-4 h-4"})," Ajukan Izin"]})]})]})]}),[s,g,i,P,k,D,_,r]);return e.jsxs("div",{className:"max-w-4xl mx-auto p-4 md:p-6",children:[p?J:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs(w,{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 transition-colors",children:[e.jsx(ue,{className:"mr-2",size:16})," Ajukan Izin Baru"]})}),j.length===0?H:e.jsx("div",{className:"space-y-4",children:j.map(U)})]}),e.jsx(ae,{open:y,onOpenChange:x,title:"Batalkan Izin",description:"Apakah anda yakin ingin membatalkan izin ini?",confirmText:"Ya",cancelText:"Tidak",onConfirm:R})]})};export{Je as default};
